<?xml version="1.0"?>
<!DOCTYPE modification SYSTEM "http://www.elkarte.net/site/modification">
<!--
/**
 * @package Global Header and Footer ElkArte
 *
 * @author BurkeKnight
 * @copyright 2015 BurkeKnight Enterprises
 * @license BSD 3-clause
 * @version 1.0.0
 *
  */
-->
<modification xmlns="http://www.elkarte.net/site/modification" xmlns:elk="http://www.elkarte.net/">

	<id>BurkeKnight:Global_Header_and_Footer</id>

	<version>1.0.0</version>

	<file name="THEMEDIR/index.template.php">
		<operation>
			<search position="replace"><![CDATA[	echo '
</head>]]></search>
			<add><![CDATA[
			if(!empty($modSettings['global_head']))
		echo '
	', $modSettings['global_head'],'

</head>]]></add>
		</operation>

		<operation>
			<search position="before"><![CDATA[	// Show the navigation tree.
	theme_linktree();]]></search>
			<add><![CDATA[if(!empty($modSettings['global_mid']))
		echo '
	<br /><div>', $modSettings['global_mid'],'</div>';
	]]></add>
		</operation>

		<operation>
			<search position="replace"><![CDATA[function template_html_below()
{
	global $context;

	echo ']]></search>
			<add><![CDATA[function template_html_below()
{
	global $context, $modSettings;

		if(!empty($modSettings['global_foot']))
		echo '
	<br /><div>', $modSettings['global_foot'],'</div>
	]]></add>
		</operation>

		<operation>
			<search position="replace"><![CDATA[function template_body_below()
{
	global $context, $txt;]]></search>
			<add><![CDATA[function template_body_below()
{
	global $context, $txt, $modSettings;]]></add>
		</operation>

		<operation>
			<search position="replace"><![CDATA[<li class="copyright">]]></search>
			<add><![CDATA[<li class="copyright">', $modSettings['global_copy'],'<br />]]></add>
		</operation>

	</file>
	
		<file name="LANGUAGEDIR/english/Addons.english.php">
		<operation>
			<search position="end" />
			<add><![CDATA[
$txt['global_head'] = 'Add content to the &lt;head&gt;&lt;/head&gt; tags:';
$txt['global_mid'] = 'Add content below linktree:';
$txt['global_foot'] = 'Add content to the footer:';
$txt['global_copy'] = 'Add custom copyright to the footer:';
]]></add>
		</operation>
	</file>

	<file name="SOURCEDIR/admin/AddonSettings.controller.php">
		<operation>
			<search position="replace"><![CDATA[$config_vars = array();

		// Add new settings with a nice hook.]]></search>
			<add><![CDATA[$config_vars = array(
		array('large_text', 'global_head', '4'),
		array('large_text', 'global_mid', '4'),
		array('large_text', 'global_foot', '4'),
		array('text', 'global_copy', '30'),
		'',
);

		// Add new settings with a nice hook.]]></add>
		</operation>
	</file>
</modification>
